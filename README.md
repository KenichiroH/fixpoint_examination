# プログラミング試験 解答

株式会社フィックスポイント 採用担当者様

プログラミング試験の解答を提出させていただきます。

## 実行方法
　このプログラムはPython3.10を用いて書かれています。設問2,3,4は実行する際、最終行の引数に任意のN,m,tの値を代入してください。
 #### 入力ファイル
 読み込む監査ログはテキストファイル（.txt）であり、プログラムファイルと同じディレクトリにあることを想定しています。監査ログは関数において、引数 filename で受け取られます。
 #### 出力ファイル
 結果を出力するファイルは、output（半角英数の設問番号）.txtです（例えば設問2ならoutput2.txt）。もしこのファイルがプログラムファイルと同じディレクトリになければ作成され、あれば追記されます。

## 内容
### 設問1
1. 監査ログを整理します。<br>キーをサーバーアドレス、値を[[日時,応答時間],[日時,応答時間]]（二重リスト）とする辞書dic_serversを作成します。
2. タイムアウトの始点（since_time）を特定します。　<br>辞書内の各々のサーバーアドレスに対して、タイムアウトしているものがあれば、タイムアウトした日時をsince_time_listにリストアップします。そのうち日時が最も早いものが、タイムアウトの始点です。
3. タイムアウトの終点(until_time)を特定します。　<br>タイムアウトしたものが次に応答するときの日時を調べます。もし監査ログの終わりまで応答していなければ、until_timeはnowになります。
4. output１.txt に結果を出力します。

### 設問2
1. 設問1.1に同じ
2. 次に応答するまで何回連続でタイムアウトしたかを調べます。<br>すなわち'-'が連続で辞書の値に出てくる回数です。
3. もしN回以上連続でタイムアウトしているならば、since_timeを特定します。<br>方法は設問1.2と同じです。
4. 同様にuntil_timeを特定します。<br>ぞれぞれのタイムアウトの終点のうち、もっとも遅いものが連続したタイムアウトの終点です。
5. output2.txt に結果を出力します。

### 設問3
1. 設問2.1〜3に同じ
2. 応答時間のみのリストの作成<br>それぞれのサーバーに対して、応答時間のみを日時順にm個格納したリストm_latencyを作ります。ただし、m個の要素の中にタイムアウトしたものがある場合はリストは作りません。
3. 平均応答時間の計算<br>平均応答時間がtより大きい場合は、4が行われます。
4. output3.txt に結果を出力します。

### 設問4
1. 関数network_dictを定義します。<br>この関数はサーバーアドレス(server)と辞書(servers_net_host)を引数に取り、ネットワーク部が同じサーバーアドレスを辞書servers_net_hostにまとめます。severs_net_hostはキー：ネットワーク部、値：サーバアドレスのリストです。
2. 設問2.1に同じ。
3. 辞書すべてのサーバーアドレスについて、4.1の辞書all_serversを作成します。
4. 設問2.2,3に同じ
5. 故障しているサーバーアドレスについて、4.1の辞書servers_oooを作成します。
6. servers_oooとall_serversを対照します。<br>servers_oooのキーと同じall_serversのキーについて、値（ネットワークアドレス）がすべて同じならば、サブネットがダウンしていると判定し、サーバー名とsince_time, until_timeを出力します。
7. output4.txt に結果を出力します。

## テスト
テストに用いた監査ログはtest(設問番号).txt、結果はtest_output(設問番号).txtとしてリポジトリにアップロードしています。
